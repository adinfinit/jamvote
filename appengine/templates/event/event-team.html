{{ template "head" . }}

<section>
	<div class="titlemenu">
		<h1>Team: {{ .Team.Name }}</h1>
		{{ if .CanEditTeam }}
		<a class="button" href="{{.Event.Path "team" .Team.ID "edit"}}">Edit</a>
		{{ end }}
		<a class="button" href="{{.Event.Path "vote" .Team.ID}}">Vote</a>
	</div>

	{{ if .Event.Revealed }}
	<section>
		<br>
		<div class="side-by-side">
		{{ range $aspect := .Aspects }}
			{{ $info := (Data.AspectsInfo.Item $aspect.Name) }}
			<div>
				<div style="font-weight: bold;">{{ $aspect.Name }}</div>
				<svg width="100%" style="max-width: 7rem;" height="10rem" viewBox="0 0 100 100" preserveAspectRatio="none" >
					<rect x="0%" y="0%" width="100%" height="100%" style="fill:#eee;" />

					<polyline stroke="#666" stroke-dasharray="2, 5" points="0,0   100,0" />
					<polyline stroke="#666" stroke-dasharray="1, 5" points="0,25  100,25" />
					<polyline stroke="#666" stroke-dasharray="2, 5" points="0,50  100,50" />
					<polyline stroke="#666" stroke-dasharray="1, 5" points="0,75  100,75" />
					<polyline stroke="#666" stroke-dasharray="2, 5" points="0,100 100,100" />

					{{ with $info.MemberScores }}
					{{ $average := averageViolinScore $aspect.Min $aspect.Max . }}
					<polyline fill="#e88" points="{{ violinLeft  $aspect.Min $aspect.Max . }}" />
					<polyline stroke="rgba(0,0,0,0.5)" points="0,{{$average}} 50,{{$average}}" />
					{{ end }}

					{{ with $info.Scores }}
					{{ $average := averageViolinScore $aspect.Min $aspect.Max . }}
					<polyline fill="#88e" points="{{ violinRight $aspect.Min $aspect.Max . }}" />
					<polyline stroke="#44a" points="50,{{$average}} 100,{{$average}}" />
					{{ end }}

					<polyline stroke="#666" stroke-dasharray="1, 1" stroke-width="1px" vector-effect="non-scaling-stroke" points="50,0 50,100" />
				</svg>
			</div>
		{{ end }}
		</div>
		<br>
	</section>
	{{ end }}

	<div class="side-by-side">
		<div>
			<div class="field">
				<label for="Team.Name"><span>Team Name</span></label>
				<div class="input" id="Team.Name" name="Team.Name">{{.Team.Name}}</div>
			</div>

			<div class="field">
				<label>Members</label>

				{{ range .Team.Members }}
				<div><a {{if .ID}}class="button" href="/user/{{.ID}}"{{else}}class="button disabled-minimal"{{end}}>{{ .Name }}</a></div>
				{{ end }}
			</div>
		</div>
		<div>
			<div class="field">
				<label for="Team.Game.Name"><span>Game Name</span></label>
				<div class="input" id="Team.Game.Name">{{.Team.Game.Name}}</div>
			</div>

			<div class="field">
				<label for="Team.Game.Info">Info</label>
				<div class="input" id="Team.Game.Info" rows=4>{{range paragraphs .Team.Game.Info}}<p>{{.}}</p>{{end}}</div>
			</div>
			
			{{ if .Team.Game.Link.Facebook }}
			<div class="field">
				<label for="Team.Game.Link.Facebook">Facebook</label>
				<a class="button" href="{{.Team.Game.Link.Facebook}}" id="Team.Game.Link.Facebook" >{{.Team.Game.Link.Facebook}}</a>
			</div>
			{{ end }}

			{{ if .Team.Game.Link.Jam}}
			<div class="field">
				<label for="Team.Game.Link.Jam">Jam Page</label>
				<a class="button" href="{{.Team.Game.Link.Jam}}" id="Team.Game.Link.Jam" >{{.Team.Game.Link.Jam}}</a>
			</div>
			{{ end }}
		</div>
	</div>
	
	{{ if .Event.Revealed }}
	<section>
		<h2>Comments</h2>
		{{ range $aspect := .Aspects }}
			{{ $info := (Data.AspectsInfo.Item $aspect.Name) }}
			{{ if $info.Comments }}
			<div class="comments">
				<h3>{{ $aspect.Name }}</h3>
				{{ range $info.Comments }}
				<p class="comment">{{.}}</p>
				{{ end }}
			</div>
			{{ end }}
		{{ end }}
	</section>
	{{ end }}
</section>

{{ template "foot" . }}